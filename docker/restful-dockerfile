FROM node:18.7.0
WORKDIR /restful
ADD . .
ENV REDIS_HOST     ''
ENV REDIS_PORT     ''
ENV REDIS_DB       ''
ENV REDIS_PASSWD   ''
ENV MONGO_PATH     ''
ENV RABBITMQ_PATH  ''
RUN npm install -g pnpm && \
    pnpm install && \
    pnpm build
EXPOSE 3000
CMD ["node", "./dist/apps/back/apps/back/src/main.js"]
