FROM node:18.7.0
WORKDIR /pusher
ADD . .
ENV REDIS_HOST     ''
ENV REDIS_PORT     ''
ENV REDIS_DB       ''
ENV REDIS_PASSWD   ''
ENV MONGO_PATH     ''
ENV RABBITMQ_PATH  ''
RUN npm install -g pnpm && \
    pnpm install && \
    pnpm build
EXPOSE 3001
CMD ["node", "./dist/apps/transfer/apps/transfer/src/main.js"]
